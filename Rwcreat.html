<!DOCTYPE html>
<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>Workout Tracker - Maathu Fitness</title>

<style>
:root{
  --bg:#eef3f8;
  --card:#ffffffcc;
  --border:#d7e0ea;
  --accent:#007bff;
  --accent2:#00b894;
  --text:#1c1c1c;
}

body{
  margin:0;
  font-family:'Poppins',Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
*,button,a{transition:0.25s;}

header{
  height:60px; display:flex; align-items:center; justify-content:center;
  font-size:19px; font-weight:700;
  position:fixed; top:0; left:0; right:0;
  background:blue; color:white;
  z-index:10;
}
.menu-btn{
  position:absolute; left:14px; font-size:26px; background:none; border:none; cursor:pointer; color:white;
}

.sidebar{
  width:250px; background:#ffffffee; position:fixed; top:0; bottom:0; left:-260px; 
  padding-top:75px; border-right:1px solid var(--border); transition:.35s;
  backdrop-filter:blur(10px);
  z-index:20;
}
.sidebar.open{left:0;}
.sidebar a{
  display:flex; align-items:center; padding:16px 22px; font-size:17px; 
  text-decoration:none; color:var(--text); border-bottom:1px solid #f1f4f6;
}
.sidebar a:hover{background:#f8fffd; color:var(--accent); padding-left:28px;}

.main{
  position:absolute; top:65px; bottom:65px; left:0; right:0;
  overflow-y:auto; padding:18px;
}

.card{
  background:white; padding:15px; border-radius:12px; margin-bottom:15px;
  box-shadow:0 3px 10px rgba(0,0,0,.08);
}

input{
  width:94%; padding:12px; margin:8px 0; border-radius:10px;
  border:1px solid var(--border); font-size:14px;
}

.status-box{display:flex; justify-content:space-between; margin-top:5px; margin-bottom: 10px;}
.status-box button{
  width:32%; padding:10px; font-size:15px; font-weight:700; border:2px solid transparent; border-radius:8px; cursor:pointer;
}
.status-box button.selected { border-color: #000; transform: scale(1.05); }
.yes{background:#00b894;color:white;}
.medium{background:#f1c40f;color:black;}
.no{background:#ff4757;color:white;}

.save-btn{
  width:100%; padding:12px; background:var(--accent2);
  color:white; font-weight:700; border:none; border-radius:10px; font-size:15px; cursor:pointer;
  margin-top:10px;
}

.history-item {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px; border-bottom: 1px solid #eee;
}
.delete-btn {
  background: #ff4757; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;
}

.bottom{
  height:60px; position:fixed; bottom:0; left:0; right:0; display:flex;
  justify-content:space-around; align-items:center; background:#ffffffcc; border-top:1px solid var(--border);
}
.bottom button{
  background:none; border:none; font-size:13px; display:flex; flex-direction:column; align-items:center; opacity:.6; cursor:pointer; font-weight:600;
}
.bottom button span{font-size:22px;}

.overlay{
  position:fixed; top:0; left:0; right:0; bottom:0;
  background:rgba(0,0,0,0.4); display:none; z-index:15;
}
.overlay.show{ display:block; }
</style>
</head>

<body>

<header>
  <button class="menu-btn" onclick="toggleMenu()">тШ░</button>
  ЁЯУе Save Workout Data
</header>

<div id="sidebar" class="sidebar">
  <a href="index.html">ЁЯПа Dashboard</a>
  <a href="workouts.html">ЁЯФе Workouts</a>
  <a href="diet.html">ЁЯеЧ Diet Plans</a>
</div>

<div id="overlay" class="overlay" onclick="toggleMenu()"></div>

<div class="main">

  <div class="card">
    <h3>ЁЯПЛя╕П Log Workout</h3>
    
    <label>Select Date:</label>
    <input type="date" id="workoutDate">

    <div class="status-box">
      <button class="yes" id="btn-done" onclick="selectStatus('тЬЕ Done')">тЬЕ</button>
      <button class="medium" id="btn-med" onclick="selectStatus('ЁЯЯб Medium')">ЁЯЯб</button>
      <button class="no" id="btn-miss" onclick="selectStatus('тЭМ Missed')">тЭМ</button>
    </div>

    <button class="save-btn" onclick="saveWorkoutLog()">ЁЯТ╛ Save Workout</button>
  </div>

  <div class="card">
    <h3>ЁЯУК Workout History</h3>
    <div id="historyList">
    </div>
  </div>

</div>

<div class="bottom">
  <button onclick="location.href='index.html'"><span>ЁЯПа</span>Home</button>
  <button onclick="location.href='workouts.html'"><span>ЁЯФе</span>Workout</button>
  <button onclick="location.href='diet.html'"><span>ЁЯеЧ</span>Diet</button>
</div>

<script>
function toggleMenu(){
  document.getElementById("sidebar").classList.toggle("open");
  document.getElementById("overlay").classList.toggle("show");
}

let selectedStatus = "";

// роЗройрпНро▒рпИроп родрпЗродро┐ропрпИродрпН родро╛ройро╛роХ роЕроорпИроХрпНроХ
document.getElementById('workoutDate').valueAsDate = new Date();

function selectStatus(status) {
    selectedStatus = status;
    document.querySelectorAll('.status-box button').forEach(btn => btn.classList.remove('selected'));
    if(status.includes("тЬЕ")) document.getElementById('btn-done').classList.add('selected');
    if(status.includes("ЁЯЯб")) document.getElementById('btn-med').classList.add('selected');
    if(status.includes("тЭМ")) document.getElementById('btn-miss').classList.add('selected');
}

// тЬЕ Save Workout Log
function saveWorkoutLog() {
    const dateInput = document.getElementById("workoutDate").value;
    
    if(!dateInput || !selectedStatus) {
        alert("родропро╡рпБроЪрпЖропрпНродрпБ родрпЗродро┐ рооро▒рпНро▒рпБроорпН ро╡рпКро░рпНроХрпНроЕро╡рпБроЯрпН роиро┐ро▓рпИропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН!");
        return;
    }

    // 1. ро╡ро░ро▓ро╛ро▒рпНро▒ро┐ро▓рпН роЪрпЗрооро┐роХрпНроХ
    let workoutHistory = JSON.parse(localStorage.getItem("workoutHistory")) || {};
    workoutHistory[dateInput] = selectedStatus;
    localStorage.setItem("workoutHistory", JSON.stringify(workoutHistory));
    
    // 2. Dashboard Chart-роЙроЯройрпН роЗрогрпИроХрпНроХ
    syncWithDashboard();

    alert("тЬЕ родро░ро╡рпБ роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ: " + dateInput);
    loadHistory();
}

// тЬЕ Dashboard-роХрпНроХрпБродрпН родрпЗро╡рпИропро╛рой Arrays-роХро│рпИрокрпН рокрпБродрпБрокрпНрокро┐роХрпНроХ (Chart Update)
function syncWithDashboard() {
    let workoutHistory = JSON.parse(localStorage.getItem("workoutHistory")) || {};
    let doneDays = [];
    let mediumDays = [];
    
    const todayStr = new Date().toISOString().split('T')[0];
    const currentMonth = new Date().getMonth();

    for (let date in workoutHistory) {
        let d = new Date(date);
        // роироЯрокрпНрокрпБ рооро╛родродрпНродро┐ройрпН родро░ро╡рпБроХро│рпИ роороЯрпНроЯрпБроорпН Chart-роХрпНроХрпБ роЕройрпБрокрпНрок
        if (d.getMonth() === currentMonth) {
            let dayNumber = d.getDate();
            let status = workoutHistory[date];

            if (status.includes("тЬЕ")) {
                doneDays.push(dayNumber);
            } else if (status.includes("ЁЯЯб")) {
                mediumDays.push(dayNumber);
            }
        }

        // роЗройрпНро▒рпБроХрпНроХро╛рой ро╡рпКро░рпНроХрпНроЕро╡рпБроЯрпН роОройрпНро▒ро╛ро▓рпН "Today Goals"-роХрпНроХрпБроЪрпН роЪрпЗрооро┐роХрпНроХ
        if (date === todayStr) {
            localStorage.setItem("todayWorkout", workoutHistory[date]);
        }
    }

    localStorage.setItem("doneWorkoutDays", JSON.stringify(doneDays));
    localStorage.setItem("mediumWorkoutDays", JSON.stringify(mediumDays));
}

// тЬЕ Load History
function loadHistory() {
    const historyList = document.getElementById("historyList");
    historyList.innerHTML = "";
    
    let workoutHistory = JSON.parse(localStorage.getItem("workoutHistory")) || {};
    const sortedDates = Object.keys(workoutHistory).sort().reverse();

    if(sortedDates.length === 0) {
        historyList.innerHTML = "<p style='text-align:center;color:grey;'>рокродро┐ро╡рпБроХро│рпН роОродрпБро╡рпБроорпН роЗро▓рпНро▓рпИ.</p>";
        return;
    }

    sortedDates.forEach(date => {
        const item = document.createElement("div");
        item.className = "history-item";
        item.innerHTML = `
            <span><strong>${date}</strong>: ${workoutHistory[date]}</span>
            <button class="delete-btn" onclick="deleteEntry('${date}')">роирпАроХрпНроХрпБроХ</button>
        `;
        historyList.appendChild(item);
    });
}

// тЬЕ Delete Entry
function deleteEntry(date) {
    if(confirm("роЗроирпНродрокрпН рокродро┐ро╡рпИ роирпАроХрпНроХ ро╡рпЗрогрпНроЯрпБрооро╛?")) {
        let workoutHistory = JSON.parse(localStorage.getItem("workoutHistory")) || {};
        
        const todayStr = new Date().toISOString().split('T')[0];
        if (date === todayStr) {
            localStorage.setItem("todayWorkout", "Rest Day ЁЯШ┤");
        }

        delete workoutHistory[date];
        localStorage.setItem("workoutHistory", JSON.stringify(workoutHistory));
        
        syncWithDashboard(); // роЪро╛ро░рпНроЯрпНроЯрпИ роЕрокрпНроЯрпЗроЯрпН роЪрпЖропрпНроп
        loadHistory();
    }
}

window.onload = loadHistory;
</script>

</body>
</html>
